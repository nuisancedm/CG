# 以下是笔记

# 着色 SHADING

**shading在美术上的定义**：用色块或者线条定义明暗和颜色。  
**shading在CG中**：给物体应用材质。且着色具有局部性，只考虑光线来的方向而不考虑光线是否被别的物体挡住，所以着色并**不会产生阴影**，shading ≠ shadow。

## Blinn-Phong Reflectance Model (布林冯反射模型)

一些重要的定义：

* **v-观测方向(viewer direction)**：以物体表面点为起点，方向指向相机的单位向量
* **n-表面法线(surface normal)**：以物体表面点为起点，垂直于表面的单位向量
* **l-光源方向(light direction)**:以物体表面点为起点,方向指向光源的单位向量
* **表面点参数(surface parameters)**：例如颜色color，光滑度shininness

### 漫反射

漫反射几时光线碰到表面点之后，均匀的反射到所有方向。这意味着表面点从不同的角度看颜色是相同的。  

* **Lambert's cosine law**：同样的光以不同的角度照射到一个点上，接收到的光强度不同，光线方向l和表面法线n的夹角决定了光的强度，与cosθ = l.dot( n )正相关。
* **光的衰减**： 光线传播的过程中，越远的地方他的光线强度越低，离光源r位置处的光强 = I / r^2

结合上面两点可以得到Lambertian diffuse shading公式：$$ L_{d}=k_{d}(I/r^2)max(0,n·l) $$  
其中Ld为表面点的最终漫反射光强度，kd为漫反射系数，I为光源强度，r为表面点到光源的距离，n为表面法线，l为光线方向。**和观测方向v完全无关**。
