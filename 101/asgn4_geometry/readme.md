# 以下是笔记
# Geometry
## implicit 隐式几何
隐式表示：不直接给出点的位置，而是给出这些点满足什么关系。  
通常点满足一个函数f(x,y,z)=0。  

隐式表示可以很简单的判断：一个点在不在几何表面上。  
但是隐式表示很难判断：有哪些点在几何表面上，这个几何是什么形状。
* 代数公式隐式表面：缺点就是很不直观。不好表示复杂表面。 
* constructive solid geometry（CSG）:通过记录基础几何的布尔运算来进行隐式表示，布尔建模，工业软件常用。 
* distance function 距离函数：SDF/UDF。距离函数可以很容易的该表表面的拓扑结构。 
* level set 水平集：类似于地理上的等高线，思想上和距离函数十分相似，但是他的每个按照格子来记录距离，通过插值得到具体点的距离。    
* fractals 分型：指自相似，自身的一部分和整体非常相似。和编程中的递归非常相似
## explicit 显示几何
显示表示：给出所有的点的位置或者通过参数映射给出表面。  
* 点云：list of point(x,y,z)，通常会被转化成多边形面片。
* mesh：存储顶点和连接关系，最常用的显示表示。.obj文件存储以下信息：顶点坐标3x，法线方向3x，纹理坐标2x，和那三个顶点组成一个面的连接关系。


### 参数映射表示几何
通常表示为

$$
f:R^2 \rightarrow R^3；(u,v) \rightarrow (x,y,z)
$$

我们遍历每一个uv坐标就能得到所有点的三维坐标，所以参数映射是一个显示表示。  

显示表示可以很简单的判断：哪些点在表面上。  
但是显示表示很难判断：给定一个点再不在表面上。  

# 贝塞尔曲线 Bezier Curve
贝塞尔曲线用一系列控制点来定义一条曲线。
例如我们有p0,p1,p2,p3四个控制点。我们规定：
* 曲线的起始点和终止点必须在p0点和p3点。
* 曲线的起始切线必须沿着p0p1，曲线的终止切线必须沿着p2p3。  

加入有n个控制点，如何画出一条贝塞尔曲线？
## Casteljau算法。
假设有3个点b0,b1,b2。(三个点就是二次贝塞尔曲线)  
Casteljau算法假设一条曲线由一个点在不同时间t下的位置共同组成。 
假定某个时间t。
假设在b0b1在时间t上的点为b3。  
假设在b1b2在时间t上的点为b4。
假设在b3b4在时间t上的点为b5。
由b5在不同时间位置组成的线，就是有b0b1b2三个控制点画出的贝塞尔曲线。  
如果有4个控制点，同理，递归到最后一个点，就是贝塞尔曲线的点。

## 贝塞尔曲线代数表示
b0,b1,b2三个控制点。
$$
b_0^1(t) = (1-t)b_0 + t \times b_1  
$$

$$
b_1^1(t) = (1-t)b_1 + t \times b_1
$$
有最终点

$$
b_0^2(t) = (1-t)b_0^1 + t \times b_1^1 = (1-t^2)b_0+2t(1-t)b_1+t^2b_2
$$

只和b0b1b2有关。  
对于n+1个控制点，我们可以得到一个n次贝塞尔曲线

$$
b^n(t) = b_0^n(t) = \sum_{j=0}^{n} b_jB_j^n(t)
$$

其中bj为控制点坐标，B为伯恩斯坦多项式。

$$
B_j^n(t) = 
\begin{pmatrix} 
n \\
i
\end{pmatrix}t^i(1-t)^{n-i}
$$

## 贝塞尔曲线的性质
* 规定起点和终点。
* 起始方向和结束方向已知。
* affine transformation不影响贝塞尔曲线的正确性，我们只需要对控制点做affine。注意：该属性只对affine有效，对projection无效。
* 凸包性质：画出来的曲线一定在所有控制点的凸包内。
## Piecewise Bezier Curves.
当控制点变多之后，我们光靠这些控制点很难直观的控制曲线。所有就有了多段贝塞尔曲线。  
我们每四个控制点定义一个贝塞尔曲线，然后把不同的曲线连起来。